# Databricks Reusable and modular ETL Pipeline
This article explains the ETL architecture for maintaining a reusable and modular Spark pipeline on Databricks 

------
![Image Link](https://github.com/mdanish6580/Best-Practices-for-ML-code-Modularity/blob/main/testt.png)

----
# Description
* **Source DB:** This source db could be any source. Eg. ADLS raw container, Blob Storage container, raw folder in S3 bucket

* **config file:** In pythonic code it would be .ini,  or .yaml file but in databricks environment it could be another notebook where the configuration details of source db and target db would be listed. For more details refer to database connection repository. This file will also hold all static information necessary for ETL.

* **script:** This is the master script where config files/notebooks will be ran using databricks utility function. This script also has all the transformation or data manipulation methods that could be used for data transformation. The transformed data will then be pushed into target db.

# Data warehouse Practice
As per Microsoft architecture, it is not recommended to push whole transformed dataset into a data warehouse (Azure Data Pool or Redshift or Snowflake). While it is recommended to store dataset if we are not planning to run queries pertaining to aggregation or query which would be computationally expensive. Generally, after performing aggregation on the transformed dataset, it is pushed to data warehouse.

----
# Check out this link for more broader view of architecture
```
https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1&title=test.html#R5Vvbbts4EP2aAO1DDF1sx3nMtbtAAmTrFuk%2BFbREW9xIokpRcdyv3xledFfsNnGStgiQWEOK5MwczpkhnQP%2FLHn4IEgWXfOQxgeeEz4c%2BOcHnueOp0fwByUbLZn4My1YCRaaTpVgzr5TI3SMtGAhzRsdJeexZFlTGPA0pYFsyIgQfN3stuRxc9aMrGhHMA9I3JXeslBGWjrzjir5X5StIjuzOz3WLQmxnY0meURCvq6J%2FIsD%2F0xwLvWn5OGMxmg8axf93uVAa7kwQVO5ywuTD8HlxVf%2Fn68fPt6TxP%2Fy%2BfP86NCMck%2Fiwih84E1jGO90gUuWG2OH6bcC13m65Kk8zJWXTqCDO84eqkb4tMK%2F4IslW6G1GbxuxoOFLWwHY5BydC%2FjLJVUXNyDLugwFzqV9nLgISR5REPzEMkktp2k4Hf0jMdcgCTlKcVFsji2ogPPnzj4A%2FKYLGh8w3MmGU%2BhLaA4KTTcUyEZ%2BPyq1WHBpeRJrcNJzFbYIHkGUl7ImKUwu4UeTkJMl3Jw0CNDNZOHFW6REV8uWUBHYKSAZjIf5YFgWWUVnIo%2BDPrYLZEDW47yhEqxgS72hWMDtk3reV1h14qiGmytjJjdsipHrgAFHwymfgBfk8fwZcGgBQitn8ecW8OZHqk5%2BqPwoyHsefPIhYz4iqckvqikp5X0iqPvFfj%2Bo1JuTMgiheRNaILLxOYLomI0cydW8K8SjI%2BPreD8wQBHP23qTzdUMPADwkgJ9cJxtY%2FjA5TjhQjoI47xTCwlYkXltgDRxZugMZHsvrmOPvSYV29wg1c49f0mTmGTNofQ6zJvtTBYLuPnYTkdhOXTUNgBt9ePvwGoviwsm5Cc%2FCKA9J8IyCeFM28bbpYkaMImovE9Re4YBkuekfQZIaf5ZJRttkBPT7sFkWZsMYjRrdRZg14%2Fi3YJcwdOd5zTi0uvh13J90JQw6lfVf7hn%2FZlF89Atv50O9kevSTZev5PhBDBizQsU6un8VyN1jCouCNn7L1yWPF35bnZXohu0saI33L%2BnonOm7wuJN4Wx%2BwKhlp99gok4%2FeQTMuHOkTagtRr1UStkLiM%2BTqIiJCjkEiyIDn6eB0xSeeZpqs19HuemDjxtsfE2UvGxNkgY4fsvpd1QXl5aEgJadfw0iDxPoH5S1r%2BpBHpOecDBcu22kYpM0DRqNCAx2uowYHNhnbH%2BwGDtyMY2jHy2cBw%2FPS039spB%2FtISVgFJNAkDbu5lLRODxfVARZmT52e9kDl50sJg4GavztpVzs7S1gYajqgoD9ZqKEcm04p10xODybnOBYwQG6ws0sCZ0XPDzmvzbfjLuRKDq5jbrovzNmDzB7Q7Zz47wa6myKPEE0Q5FGRpY5abdAJkuZLLhJSh1ofpOpJ%2F0DR8IeCbNwmuWkPyJwekI33BrK%2BnGEvBxrOmzvQqDu4rDZ0PeJOxq0E1PFfOQV17SXGvg%2FenoanvnuBXyYHfWMpqDt8avSWctC5TVZ%2Brxy0lYLOXjkFdYdvRCLXmu%2Bc6gOsJkNX7VaYDTrTCoo%2B7yKkylGL2iskQYekizxreraqUyKW1%2FNak7kWMWa7C53pbsoOI%2Fh0scLfJ%2BdXcwxeZK0zXUlYingGGzqnMcdR5pILvIvttOuX8OIWJQ7DlGnu43xFcIf5c7nMjjk6gmKYCdfG%2B7jdFnhLvOVaczcj%2Fo2rzTZAaikLlG4hqshwt67rdhuxlCl9205wOGo92pAktlOj6tKaQsVTwYI7dAxN75ngaUJVOFCztLzDZaTMCB%2FogvM7XAdIsBFatPVBy0KY%2FNAJKTgjxsH5suN6Vdc4zUKmoVbMcklDhMCl0iPhaqpqUEGXaj3A6kYX5IZmOQSdMjxZ5mKDIxkQGlOsmdp0JM5xhEh5Dp5i5WlQIlCGqmW8DoxL85yoKLFUq7r4dDX6IRwN7zN7mzuEjp64ahVSv7QTEpKreO%2BY4SonNUAIL1xaR%2BaVLZTlhaotipylqzZKCsliJpX6RapsXDNrOaO1KMlLg%2BrFtUsIjVBTdiQkZVkR2yYImhEPtWKkA8cip2HpBDNAc3S9sMas6hXT2SgM60rtmFmhvimATleYqoFzwMdbq5hdSw0ojgI0t38%2BqZ4%2BqTQWjxT76Y8DvWF2BJIIiiFQpH0A%2BxwVy3GDBcvr1%2FpNxcTt0qC7v7J4%2BAq2xoPGy6BnxAsVF24EAcQG9a%2BVPMKLJ4i8TO2kaxYInvOlgrYI0BOBLHBPndlQqfAP%2B0lFnIAnEEZDBSUFpEyX12sIMf14zKmsYEdqIK0t%2F93JdzWnY1S74Ty2O%2BgjDfOIqQWq53nK18uY3NH3uAtuIx3vqpX2rDGXJr5Wy8GgvVaxX7Vo9bKYpKmODOo9UeD%2B%2BVZA3UONyZCCaz3IaiXoqrHjsftGWYQFUTkBrCkrpOoIQWOjLULTHGoWVOMDBWLXDWh3c0qBE6It9YStudJu5GnavOnAMgCUlFL3wZ8bA1qZ8MTtiQHjnlTY9fYWA4YP56uME514fYUbgIu7XNmtc0D17uQW08s55I8J7BdhEXpyffW%2Bn3N%2FhZOr54j7s6bTe6qfMsS%2FSPnj9Z2G%2FioHC9PZ9pOFcre8zI3%2FMIu%2BpaMFQ3a3FRH%2BNucLbUz03XH1YmJ%2FW%2Bxoh8zqIy1yFbNU8YOJCMsofpkVPh6a9MTWC72J1h9AmO5Ry7Vdz05f9JTfG%2BbLbg6887n%2FrO%2Fc%2F3SjW695FCo4pAyz321b9A9DyLSVU017IOJO%2FWeBCDxW%2Fyugvx5U%2FceFf%2FE%2F
```
